@model CheckoutViewModel

@section ImportantLinks{ 
    <link rel="stylesheet" href="/css/Checkout.css" />
}

<div class="container checkout-container">
    <div class="title">
        <h2>Product Order Form</h2>
    </div>
    <div class="d-flex">
        <form asp-controller="Sales" asp-action="Checkout">
            <label>
                <span class="fname">First Name <span class="required">*</span></span>
                <input type="text" name="fname">
            </label>
            <label>
                <span class="lname">Last Name <span class="required">*</span></span>
                <input type="text" name="lname">
            </label>
            <label>
                <span>Company Name (Optional)</span>
                <input type="text" name="cn">
            </label>
            <label>
                <span>Country <span class="required">*</span></span>
                <select name="selection">
                    <option value="" selected>Select a country...</option>
                    @foreach (var country in Model.Countries.OrderBy(x => x.Name))
                    {
                    <option value="@country.Code">@country.Name</option>
                    }            
                </select>
            </label>
            <label>
                <span>Street Address <span class="required">*</span></span>
                <input type="text" name="houseadd" placeholder="House number and street name" required>
            </label>
            <label>
                <span>&nbsp;</span>
                <input type="text" name="apartment" placeholder="Apartment, suite, unit etc. (optional)">
            </label>
            <label>
                <span>Town / City <span class="required">*</span></span>
                <input type="text" name="city">
            </label>
            <label>
                <span>State / County <span class="required">*</span></span>
                <input type="text" name="city">
            </label>
            <label>
                <span>Postcode / ZIP <span class="required">*</span></span>
                <input type="text" name="city">
            </label>
            <label>
                <span>Phone <span class="required">*</span></span>
                <input type="tel" name="city">
            </label>
            <label>
                <span>Email Address <span class="required">*</span></span>
                <input type="email" name="city">
            </label>
        </form>
        <div class="Yorder">
            <table>
                <tr>
                    <th colspan="2">Your order</th>
                </tr>
                @foreach (var product in Model.ProductsInfo)
                {
                    <tr>
                        <td>@product.Name x @(product.Quantity)(Qty)</td>
                        <td>$@product.SinglePrice</td>
                    </tr>
                }
                <tr>
                    <td>Shipping</td>
                    @if (Model.ShippingPrice > 0)
                    {
                        <td>$@Model.ShippingPrice.ToString("f2")</td>
                    }
                    else
                    {
                        <td>Free shipping</td>
                    }
                </tr>
                <tr>
                    <td>Total Price</td>
                    <td>$@((Model.TotalPrice + Model.ShippingPrice).ToString("f2"))</td>
                </tr>
            </table><br>
            @foreach (var paymentMethod in Model.PaymentMethods)
            {
                <div>
                    <input type="radio" name="dbt" value="dbt" checked> @paymentMethod.Name
                    @if(paymentMethod.Name == "Paypal")
                    {
                        <span>
                            <img src="https://www.logolynx.com/images/logolynx/c3/c36093ca9fb6c250f74d319550acac4d.jpeg" alt="" width="50">
                        </span>
                    }
                </div>
                @if (paymentMethod.Name == "Direct Bank Transfer")
                {
                    <p>
                        Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.
                    </p>
                }
            }            
            <button type="button">Place Order</button>
        </div><!-- Yorder -->
    </div>
</div>